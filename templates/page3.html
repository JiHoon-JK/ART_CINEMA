<!DOCTYPE html>
<html>
<head>
  <title>세번째 페이지</title>

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
  integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <!-- JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
  crossorigin="anonymous"></script>

  <!-- 방금 추가한 것 -->
  <link href="https://fonts.googleapis.com/css?family=Gamja+Flower&display=swap&subset=korean" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Poor+Story&display=swap&subset=korean" rel="stylesheet">

  <!-- 추가한 부분 -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato"rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
  crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

  <!-- 추가한 부분 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script type="text/javascript">

   let nickname = "{{sessionemail2}}"
   //get_session();
   listing_genre1();
   listing_genre2();
   

   let movies;
   let movies2;


   // let like_html_part = `<path fill-rule="evenodd" d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16v-1c.563 0 .901-.272 1.066-.56a.865.865 0 0 0 .121-.416c0-.12-.035-.165-.04-.17l-.354-.354.353-.354c.202-.201.407-.511.505-.804.104-.312.043-.441-.005-.488l-.353-.354.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315L12.793 9l.353-.354c.353-.352.373-.713.267-1.02-.122-.35-.396-.593-.571-.652-.653-.217-1.447-.224-2.11-.164a8.907 8.907 0 0 0-1.094.171l-.014.003-.003.001a.5.5 0 0 1-.595-.643 8.34 8.34 0 0 0 .145-4.726c-.03-.111-.128-.215-.288-.255l-.262-.065c-.306-.077-.642.156-.667.518-.075 1.082-.239 2.15-.482 2.85-.174.502-.603 1.268-1.238 1.977-.637.712-1.519 1.41-2.614 1.708-.394.108-.62.396-.62.65v4.002c0 .26.22.515.553.55 1.293.137 1.936.53 2.491.868l.04.025c.27.164.495.296.776.393.277.095.63.163 1.14.163h3.5v1H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>`

   // let dislike_html_part = `<path fill-rule="evenodd" d="M6.956 14.534c.065.936.952 1.659 1.908 1.42l.261-.065a1.378 1.378 0 0 0 1.012-.965c.22-.816.533-2.512.062-4.51.136.02.285.037.443.051.713.065 1.669.071 2.516-.211.518-.173.994-.68 1.2-1.272a1.896 1.896 0 0 0-.234-1.734c.058-.118.103-.242.138-.362.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.094 2.094 0 0 0-.16-.403c.169-.387.107-.82-.003-1.149a3.162 3.162 0 0 0-.488-.9c.054-.153.076-.313.076-.465a1.86 1.86 0 0 0-.253-.912C13.1.757 12.437.28 11.5.28v1c.563 0 .901.272 1.066.56.086.15.121.3.121.416 0 .12-.035.165-.04.17l-.354.353.353.354c.202.202.407.512.505.805.104.312.043.44-.005.488l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.415-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.353.352.373.714.267 1.021-.122.35-.396.593-.571.651-.653.218-1.447.224-2.11.164a8.907 8.907 0 0 1-1.094-.17l-.014-.004H9.62a.5.5 0 0 0-.595.643 8.34 8.34 0 0 1 .145 4.725c-.03.112-.128.215-.288.255l-.262.066c-.306.076-.642-.156-.667-.519-.075-1.081-.239-2.15-.482-2.85-.174-.502-.603-1.267-1.238-1.977C5.597 8.926 4.715 8.23 3.62 7.93 3.226 7.823 3 7.534 3 7.28V3.279c0-.26.22-.515.553-.55 1.293-.138 1.936-.53 2.491-.869l.04-.024c.27-.165.495-.296.776-.393.277-.096.63-.163 1.14-.163h3.5v-1H8c-.605 0-1.07.08-1.466.217a4.823 4.823 0 0 0-.97.485l-.048.029c-.504.308-.999.61-2.068.723C2.682 1.815 2 2.434 2 3.279v4c0 .851.685 1.433 1.357 1.616.849.232 1.574.787 2.132 1.41.56.626.914 1.28 1.039 1.638.199.575.356 1.54.428 2.591z"/>`

   function like_animation(num){

    console.log('좋아요 실행됐니?')
    console.log(num+'너 뭐니?')
    // num 값이 0 1 2 일 때, 첫번째 장르의 영화리스트를 눌렀을 때
    if(num >=0 && num<=2){
      check='first'
    }else{
      // num 값이 3 4 5 일 때, 두번째 장르의 영화리스트를 눌렀을 때
      check='second'
    }
    console.log(num)
    console.log(check)
    // $('#like').click(function(){$(this).attr("id",'like is-active')})
    $('.like-button'+num+'').toggleClass('is-active');
    check_like(num,check);
  };

  // 좋아요를 누른 영화와 누르지 않은 영화를 나눠서 like/dislike 나누는 함수
  function check_like(num,check){
    console.log(num)
    console.log(check)
    if($('.like-button'+num+'').hasClass('is-active')){
      console.log('좋아요를 눌렀습니다!');
      like_movie(num,check);

    }else{
      console.log('싫어요로 이동했습니다.')
      dislike_movie(num,check);
    }
  }

  //영화에 들어왔는데, 좋아요를 누른 영화라면 
  function check_like_db(num){
    if(num>=0 && num <=2){
      console.log(num)
      $.ajax({
       type: "POST",
       url: "/check_LDDB",
       data: {
        title:movies[num]['title'],
        poster:movies[num]['poster']
      },
      success: function(response){
        if(response['result']=='like_success'){
          console.log('이미 좋아요를 눌렀습니다.');
          console.log(num);
          // alert('좋아요를 눌렀던 영화입니다.')
          $('.like-button'+num+'').toggleClass('is-active');
          return movies
        }else{
          console.log('아직 좋아요를 누르지 않았습니다.')
          return movies
        }
      }
    })
    }else{
      console.log(num)
      number = num-3
      console.log(number)
      $.ajax({
       type: "POST",
       url: "/check_LDDB",
       data: {
        title:movies2[number]['title'],
        poster:movies2[number]['poster']
      },
      success: function(response){
        if(response['result']=='like_success'){
          console.log('이미 좋아요를 눌렀습니다.');
          console.log(num);
          // alert('좋아요를 눌렀던 영화입니다.')
          $('.like-button'+num+'').toggleClass('is-active');
          return movies2
        }else{
          console.log('아직 좋아요를 누르지 않았습니다.')
          return movies2
        }
      }
    })
    }
  }

  function listing_genre1() {
    $.ajax({
      type: "GET",
      url: "/genre1_movie",
      data: {nickname:nickname},
      success: function(response){
        let user_genre_1 = response['user_genre_1']
        console.log(user_genre_1)
        $('#result_main_genre').append('"'+user_genre_1+'"'+'   /')
        $('#main_genre_title').append("'"+user_genre_1+"'")

        if (response['result'] == 'success') {
          movies = response['movies'];
          console.log(movies);
          for (let i = 0; i < movies.length; i++) {
            movie_card(movies[i]['title'],movies[i]['poster'],movies[i]['director'],movies[i]['summary'],i)     
          }
          check_like_db(0);
          check_like_db(1);
          check_like_db(2);
        } else {
          alert('주문을 받아오지 못했습니다');
        }
      }
    })
  }

  function movie_card(title,poster,director,summary,num){
    if (summary.length > 250)
      summary = summary.substr(0,250) + "..."
    let temp_html_1 = `<div class="card" style="background-color:#c5adba;">\
    <img class="card-img-top" id="maingenre_movie_poster1"  style="position:relative; cursor:pointer;" src="${poster}" alt="Card image cap" onclick="location.href='/page5?search_data=${title}'">\
    <div class="container" style="text-align:center; position:absolute;">\
    <div class="wrapper" style="display:inline-block; vertical-align:middle;">\
    <a href="javascript:void(0);" onclick="like_animation(${num})" class="like-button${num}" id="like" style="margin-bottom:20px; margin-left:10px; top:10px; left:30px;">\
    <i class="material-icons not-liked bouncy">favorite_border</i>\
    <i class="material-icons is-liked bouncy">favorite</i>\
    <span class="like-overlay"></span>\
    </a>\
    </div>\
    </div>\
    <div class="card-body">\
    <h4 class="card-title movie_title" id="maingenre_movie_title${num}">${title}</h4>\
    <h5 class="card-text" style="text-align:right;"><small class="text-muted" id="maingenre_movie_director${num}">${director}</small></h5>\
    <br>\
    <p class="card-text" id="maingenre_movie_summary${num}">${summary}</p>\
    <button id="maingenre_movie_button${num}" onclick="location.href='/page5?search_data=${title}'">코멘트 작성하기</button>\
    <div class="prefer-body">\
    <h5 class="mt-0"id="prefer_movie_title1"></h5>\
    <p class="summary-text" id="preference_movie"></p>\
    <br><br>\
    </div>\
    </div>\
    </div>`
    $('#movies1').append(temp_html_1);

  }

// <div style="text-align:center;">
//     <svg class="bi bi-hand-thumbs-up" style="margin-right:10px; color:#619EFF;"width="2.5em" height="2.5em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" onclick="like_movie'+num+'()">'+like_html_part+'</svg>\
//     <svg class="bi bi-hand-thumbs-down" style="color:#FF6161;"width="2.5em" height="2.5em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" onclick="dislike_movie'+num+'()">'+dislike_html_part+'</svg>
//     </div>
// <button id="like_movie" onclick="like_movie' + num + '()"> <img src="static/add_button.png" style="width:50px; /height:50px;"></button>
// <button id="dislike_movie" onclick="dislike_movie' + num + '()"> <img src="static/remove_button.png" style="width:50px; height:50px"></button>


function listing_genre2() {
  $.ajax({
    type: "GET",
    url: "/genre2_movie",
    data: {nickname:nickname},
    success: function(response){
      let user_genre_2 = response['user_genre_2']
      console.log(user_genre_2)
      $('#result_second_genre').append('"'+user_genre_2+'"')
      $('#second_genre_title').append("'"+user_genre_2+"'")

      if (response['result'] == 'success') {
        movies2 = response['movies'];
        console.log(movies2)
        for (let i = 0; i < movies2.length; i++) {
          movie_card2(movies2[i]['title'],movies2[i]['poster'],movies2[i]['director'],movies2[i]['summary'],i+3)
        }
        check_like_db(3);
        check_like_db(4);
        check_like_db(5);
      } else {
        alert('주문을 받아오지 못했습니다');
      }
    }
  })
}

function movie_card2(title,poster,director,summary,num){
  if (summary.length > 250)
    summary = summary.substr(0,250) + "..."

  let temp_html_1 = `<div class="card" style="background-color:#c5adba;">\
  <img class="card-img-top" id="maingenre_movie_poster1" style="position:relative;" src="${poster}" alt="Card image cap">\
  <div class="container" style="text-align:center; position:absolute;">\
  <div class="wrapper" style="display:inline-block; vertical-align:middle;">\
  <a href="javascript:void(0);" onclick="like_animation(${num})" class="like-button${num}" id="like" style="margin-bottom:20px; margin-left:10px; top:10px; left:30px;">\
  <i class="material-icons not-liked bouncy">favorite_border</i>\
  <i class="material-icons is-liked bouncy">favorite</i>\
  <span class="like-overlay"></span>\
  </a>\
  </div>\
  </div>\
  <div class="card-body">\
  <h4 class="card-title movie_title" id="secondgenre_movie_title${num}">${title}</h4>\
  <h5 class="card-text" style="text-align:right;"><small class="text-muted" id="secondgenre_movie_director${num}">${director}</small></h5>\
  <br>\
  <p class="card-text" id="secondgenre_movie_summary${num}">${summary}</p>\
  <button id="maingenre_movie_button${num}" onclick="go_page5($(secondgenre_movie_title${num}).text())">코멘트 작성하기</button>\
  <div class="prefer-body">\
  <h5 class="mt-0"id="prefer_movie_title1"></h5>\
  <p class="summary-text" id="preference_movie"></p>\
  <br><br>\
  </div>\
  </div>\
  </div>`
  $('#movies2').append(temp_html_1);
}

// <div style="text-align:center;">
//   <svg class="bi bi-hand-thumbs-up" style="margin-right:10px; color:#619EFF;"width="2.5em" height="2.5em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" onclick="like_movie'+num+'()">'+like_html_part+'</svg>
//   <svg class="bi bi-hand-thumbs-down" style="color:#FF6161;"width="2.5em" height="2.5em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" onclick="dislike_movie'+num+'()">'+dislike_html_part+'</svg>
//   </div>

function btn_main_page(){
 location.href="/"
}

function new_page3(nickname){
  location.href="/page3?user="+nickname
}


function like_movie(num,check){
  console.log(movies)
  console.log(movies2)
  console.log(num)
  console.log(check)
  if(check == 'first'){
    console.log('윗줄!')
    $.ajax({
     type: "POST",
     url: "/like_movie",
     data: {
      nickname:nickname,
      title:movies[num]['title'],
      poster:movies[num]['poster']
    },
    success: function(response){
      if (response['result'] == 'success')
        alert('성공적으로 영화가 담겼습니다')
      else if (response['result'] == 'fail2')
        alert('이미 좋아한다고 누름')
      else if (response['result'] == 'fail1'){
        DL(movies[num]['title'])
      }
    }
  })
  }
  else if(check == 'second'){
    // id 값이 3 4 5 라서 -3 을 해줘야한다.
    number = num - 3
    console.log('아랫줄!')
    $.ajax({
     type: "POST",
     url: "/like_movie",
     data: {
      nickname:nickname,
      title:movies2[number]['title'],
      poster:movies2[number]['poster']
    },
    success: function(response){
      if (response['result'] == 'success')
        alert('성공적으로 영화가 담겼습니다')
      else if (response['result'] == 'fail2')
        alert('이미 좋아한다고 누름')
      else if (response['result'] == 'fail1'){
        DL(movies2[number]['title'])
      }
    }
  })
  }

}


function dislike_movie(num,check){
 console.log(movies)
 console.log(movies2)
 console.log(num)
 console.log(check)
 if(check == 'first'){
  $.ajax({
   type: "POST",
   url: "/dislike_movie",
   data: {
    nickname:nickname,
    title:movies[num]['title'],
    poster:movies[num]['poster']
  },
  success: function(response){
    if (response['result'] == 'success')
      alert('성공적으로 영화가 담겼습니다')
    else if (response['result'] == 'fail1')
      alert('이미 안좋아한다고 누름')
    else if (response['result'] == 'fail2'){
      LD(movies[num]['title'])
    }
  }

})
}
else if(check == 'second'){
  // id 값이 3 4 5 라서 -3 을 해줘야한다.
  number = num - 3
  console.log('아랫줄!')
  $.ajax({
   type: "POST",
   url: "/dislike_movie",
   data: {
    nickname:nickname,
    title:movies2[number]['title'],
    poster:movies2[number]['poster']
  },
  success: function(response){
    if (response['result'] == 'success')
      alert('성공적으로 영화가 담겼습니다')
    else if (response['result'] == 'fail1')
      alert('이미 안좋아한다고 누름')
    else if (response['result'] == 'fail2'){
      LD(movies2[number]['title'])
    }
  }

})
}
}


function DL(title){
 jbResult = confirm("싫어요에 담겨있는 영화입니다. 좋아하는 영화에 담을까요 ?");
 if (jbResult == true){
  $.ajax({
   type: "POST",
   url: "/DLupdate_movie",
   data: {title:title},
   success: function(response){
     if (response['result'] == 'success')
      alert('싫어요 -> 좋아요에 성공적으로 영화가 담겼습니다')
  }
})
}
}

function LD(title){
 jbResult = confirm("좋아요에 담겨있는 영화입니다. 싫어하는 영화에 담을까요 ?");
 if (jbResult == true){
  $.ajax({
   type: "POST",
   url: "/LDupdate_movie",
   data: {title:title},
   success: function(response){
     if (response['result'] == 'success')
      alert('좋아요 -> 싫어요에 성공적으로 영화가 담겼습니다')
  }
})
}
}

// function like_movie1(){
//   $.ajax({
//    type: "POST",
//    url: "/like_movie",
//    data: {
//     title:movies[1]['title'],
//     poster:movies[1]['poster']
//   },
//   success: function(response){
//    if (response['result'] == 'success')
//     alert('성공적으로 영화가 담겼습니다')
//   else if (response['result'] == 'fail2')
//     alert('이미 좋아한다고 누름')
//   else if (response['result'] == 'fail1'){
//     DL(movies[1]['title'])
//   }
// }
// })
// }
// function like_movie2(){
//   $.ajax({
//    type: "POST",
//    url: "/like_movie",
//    data: {
//     title:movies[2]['title'],
//     poster:movies[2]['poster']
//   },
//   success: function(response){
//    if (response['result'] == 'success')
//     alert('성공적으로 영화가 담겼습니다')
//   else if (response['result'] == 'fail2')
//     alert('이미 좋아한다고 누름')
//   else if (response['result'] == 'fail1'){
//     DL(movies[2]['title'])
//   }
// }
// })
// }
// function like_movie3(){
//   $.ajax({
//    type: "POST",
//    url: "/like_movie",
//    data: {
//     title:movies2[0]['title'],
//     poster:movies2[0]['poster']
//   },
//   success: function(response){
//    if (response['result'] == 'success')
//     alert('성공적으로 영화가 담겼습니다')
//   else if (response['result'] == 'fail2')
//     alert('이미 좋아한다고 누름')
//   else if (response['result'] == 'fail1'){
//     DL(movies2[0]['title'])
//   }
// }
// })
// }

// function like_movie4(){
//   $.ajax({
//    type: "POST",
//    url: "/like_movie",
//    data: {
//     title:movies2[1]['title'],
//     poster:movies2[1]['poster']
//   },
//   success: function(response){
//    if (response['result'] == 'success')
//     alert('성공적으로 영화가 담겼습니다')
//   else if (response['result'] == 'fail2')
//     alert('이미 좋아한다고 누름')
//   else if (response['result'] == 'fail1'){
//     DL(movies2[1]['title'])
//   }
// }
// })
// }
// function like_movie5(){
//   $.ajax({
//    type: "POST",
//    url: "/like_movie",
//    data: {
//     title:movies2[2]['title'],
//     poster:movies2[2]['poster']
//   },
//   success: function(response){
//    if (response['result'] == 'success')
//     alert('성공적으로 영화가 담겼습니다')
//   else if (response['result'] == 'fail2')
//     alert('이미 좋아한다고 누름')
//   else if (response['result'] == 'fail1'){
//     DL(movies2[2]['title'])
//   }
// }
// })
// }
// function dislike_movie0(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies[0]['title'],
//     poster:movies[0]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail1')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies[0]['title'])
//     }
//   }

// })
// }

// function dislike_movie1(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies[1]['title'],
//     poster:movies[1]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies[1]['title'])
//     }
//   }

// })
// }
// function dislike_movie2(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies[2]['title'],
//     poster:movies[2]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail1')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies[2]['title'])
//     }
//   }

// })
// }
// function dislike_movie3(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies2[0]['title'],
//     poster:movies2[0]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail1')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies2[0]['title'])
//     }
//   }

// })
// }

// function dislike_movie4(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies2[1]['title'],
//     poster:movies2[1]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail1')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies2[1]['title'])
//     }
//   }

// })
// }
// function dislike_movie5(){
//   $.ajax({
//    type: "POST",
//    url: "/dislike_movie",
//    data: {
//     title:movies2[2]['title'],
//     poster:movies2[2]['poster']
//   },
//   success: function(response){
//     if (response['result'] == 'success')
//       alert('성공적으로 영화가 담겼습니다')
//     else if (response['result'] == 'fail1')
//       alert('이미 안좋아한다고 누름')
//     else if (response['result'] == 'fail2'){
//       LD(movies2[2]['title'])
//     }
//   }

// })
// }

function go_home(){
  location.href="/temp"
}

function go_my_page(nickname){
 location.href="/mypage?user="+nickname
}

function go_page5(data){
  location.href="/page5?movie_title="+data
}

</script>

<style type="text/css">

  *{
    font-family: 'Noto Serif KR', serif;
  }

  .result_contents{
    border:6px #7d7d89;
    border-top-style: solid;
    border-bottom-style: solid;
    border-width: thick;
    border-radius: 20px;
    width:840px;
    height: 300px;
    background-color: #89a3b2;
    text-align: center;
    margin-top: 50px;
    margin-right: auto;
    margin-left: auto;
  }

  .title_logo_img{
    padding-top: 10px;
  }

  .result_title{
    font-size: 26pt;
    padding-top: 10px;
    color: white;
  }

  #result_main_genre{
    font-size: 36pt;
    color: white;
  }
  #result_second_genre{
    font-size: 36pt;
    color: white;
  }

  .result_word{
    font-size: 26pt;
    color: white;
  }

  .genre_contents{
    margin-top: 50px;
    margin-left: 100px;
    margin-right: 100px;
  }

  .movie_title{
    font-weight: bold;
    text-align: center;
  }

  #main_genre_title{
    text-align: center;
    font-weight: bold;
  }

  #second_genre_title{
    text-align: center;
    font-weight: bold;
  }

  #movies1{
    width:1200px;
    display: auto;
    margin-top: 30px;
    margin-right: auto;
    margin-left: auto;
  }

  #movies2{
    width:1200px;
    display: auto;
    margin-top: 30px;
    margin-right: auto;
    margin-left: auto;
  }
  #like_movie{
    background-color: #B7CBFF;
  }

  #dislike_movie{
    background-color: #FFB7B7;
  }
  #main_page_btn{
   text-align: center;
   margin-top: 40px;
   display: block;
   margin-right: auto;
   margin-left: auto;
   border:0px solid;
   border-radius: 10px;
   width: 120px;
   height:40px;
   font-size: 15pt;
   background-color:#89a3b2;
   color:white;
 }

 #my_page_btn{
   text-align: center;
   margin-top: 40px;
   display: block;
   margin-right: auto;
   margin-left: auto;
   border:0px solid;
   border-radius: 10px;
   width: 120px;
   height:40px;
   font-size: 15pt;
   background-color:#89a3b2;
   color:white;
 }

 /*추가한 부분*/
 .container {
  width: 600px;
  height: auto;
}
.container h1 {
  font-family: 'Lato';
  font-size: 3rem;
  font-weight: 300;
}
.container h4 {
  font-family: 'Lato';
  font-soze: 1.2rem;
  padding-top: 40px;
  color: #999;
}
.container .love {
  font-size: 0.9rem;
  color: #ff4f8f;
}
.container .wrapper .like-button0 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button0 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button0 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button0 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}

.container .wrapper .like-button1 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button1 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button1 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button1 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button2 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button2 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button2 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button2 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button3 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button3 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button3 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button3 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button4 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button4 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button4 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button4 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button5 {
  /*누르면 나오는 애니메이션 크기*/
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ccc;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  margin: 0 auto;
  text-decoration: none;
  overflow: hidden;
}
.container .wrapper .like-button5 .like-overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ff4f8f;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-transition: all .4s;
  transition: all .4s;
  z-index: 0;
}
.container .wrapper .like-button5 i.not-liked {
  display: block;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .like-button5 i.is-liked {
  display: none;
  color: #fff;
  position: relative;
  z-index: 1;
}
.container .wrapper .is-active .like-overlay {
  -webkit-transform: scale(1);
  transform: scale(1);
}
.container .wrapper .is-active i.not-liked {
  display: none;
}
.container .wrapper .is-active i.is-liked {
  display: block;
}

@-webkit-keyframes bouncy {
  from, to {
    -webkit-transform: scale(1, 1);
  }
  25% {
    -webkit-transform: scale(0.9, 1.1);
  }
  50% {
    -webkit-transform: scale(1.1, 0.9);
  }
  75% {
    -webkit-transform: scale(0.95, 1.05);
  }
}
@keyframes bouncy {
  from, to {
    -webkit-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  25% {
    -webkit-transform: scale(0.9, 1.1);
    transform: scale(0.9, 1.1);
  }
  50% {
    -webkit-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  75% {
    -webkit-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
}
.bouncy {
  -webkit-animation: bouncy 0.6s;
  animation: bouncy 0.6s;
  -webkit-animation-duration: 0.6s;
  animation-duration: 0.6s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.link-button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #6dacff;
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: -webkit-box;
  display: flex;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  -webkit-transition: all .4s;
  transition: all .4s;
}
.link-button img {
  width: 32px;
  height: 32px;
  display: block;
}
.link-button:hover {
  -webkit-transform: scale(1.1) rotate(180deg);
  transform: scale(1.1) rotate(180deg);
  background: #ff4f8f;
}


</style>
</head>
<body style="background-color:#c5adba;">

  <div class="button_contents" style="float:right;">

    <svg class="bi bi-house" width="2.5em" height="2.5em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-right: 20px;cursor:pointer;" onclick="go_home()">
      <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
      <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
    </svg>
    
    <svg class="bi bi-person-circle" width="2.5em" height="2.5em" style="margin-right: 30px;cursor:pointer;" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" onclick="go_my_page(nickname)">
      <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
      <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
      <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
    </svg>
    <nav class="nav nav-masthead justify-content-center" id="menubar"></nav>
    <div id= "customer_email" style="cursor: pointer;" onclick="go_my_page(nickname)"></div>

    <!-- <button id="main_page_btn" onclick="btn_main_page()">MAIN</button> -->
    <!--  <button id="my_page_btn" onclick="btn_my_page()">My Page</button> -->

  </div>

  <div class="result_contents">
    <div class="title_logo_img"><img src="static/logo.png"></div>
    <div class="result_title">Your Genre Is</div>
    <span id="result_main_genre" style="font-weight: bold;">1순위 : </span>
    &nbsp;&nbsp;&nbsp;
    <span id="result_second_genre" style="font-weight: bold;">2순위 : </span>
  </div>


  <!--메인장르 컨텐츠-->
  <div class="genre_contents">
    <div class="new_page" style="text-align:center;">
     <button onclick="new_page3(nickname)">새로운 영화를 볼래요!</button>
   </div>
   <br><br>
   <h1 id="main_genre_title"></h1>

   <div class="card-deck" id="movies1">
    <!--첫번째장르 첫번쨰추천영화-->

  </div>
</div>

<!--세컨장르 컨텐츠-->
<br><br><br><br>
<div class="genre_contents" style="margin-bottom:5%">
  <h1 id="second_genre_title"></h1>
  <div class="card-deck" id="movies2">


  </div>
</div>

</body>
</html>