<!DOCTYPE html>
<html>
<head>
 <title>my page</title>

 <!-- Required meta tags -->
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 <!-- Bootstrap CSS -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
 integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

 <!-- JS -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
 integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
 crossorigin="anonymous"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
 integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
 crossorigin="anonymous"></script>

<script type="text/javascript">



// 영화제목을 변수에 담아 전달
  function movie_search(){
      let title = $('#word_input').val();      

      if(title ==''){
            alert('이름, 제목를 입력해주세요!');
            $('#word_input').focus();
            return false;
          }
        }

$(document).ready(function(){
    listing();
})

function listing() {

// 좋아요 누른 영화 보여주기 *임시로 short_movie db 이용
  $.ajax({
        type: "GET",
        url: "/info_my_like_movie",
        data: {},
        success: function(response){
          $('#like_card_board').html('');
          if (response['result'] == 'success') {
            let my_like_movie = response['my_like_movie'];
            alert("받아오기 성공!")
            console.log(my_like_movie);
            for (let i = 0; i < my_like_movie.length; i++) {
              my_page_like_movie(my_like_movie[i]['poster'],my_like_movie[i]['title'],my_like_movie[i]['director'])
            }
          } else {
            alert('결과를 받아오지 못했습니다');
          }
        }
      })

// 싫어요 누른 영화 보여주기 *임시로 short_movie db 이용
  $.ajax({
        type: "GET",
        url: "/info_my_dislike_movie",
        data: {},
        success: function(response){
          $('#dislike_card_board').html('');
          if (response['result'] == 'success') {
            let my_dislike_movie = response['my_dislike_movie'];
            alert("받아오기 성공!")
            console.log(my_dislike_movie);
            for (let i = 0; i < my_dislike_movie.length; i++) {
              my_page_dislike_movie(my_dislike_movie[i]['poster'],my_dislike_movie[i]['title'],my_dislike_movie[i]['director'])
            }
          } else {
            alert('결과를 받아오지 못했습니다');
          }
        }
      })

// 댓글 누른 영화 보여주기 *임시로 short_movie db 이용
  $.ajax({
        type: "GET",
        url: "/info_my_comment_movie",
        data: {},
        success: function(response){
          $('#comment_card_board').html('');
          if (response['result'] == 'success') {
            let my_comment_movie = response['my_comment_movie'];
            alert("받아오기 성공!")
            console.log(my_comment_movie);
            for (let i = 0; i < my_comment_movie.length; i++) {
              my_page_comment_movie(my_comment_movie[i]['poster'],my_comment_movie[i]['title'],my_comment_movie[i]['director'])
            }
          } else {
            alert('결과를 받아오지 못했습니다');
          }
        }
      })



  $.ajax({
        type: "GET",
        url: "/info_my_diswatch_movie",
        data: {},
        success: function(response){
          $('#diswatch_card_board').html('');
          if (response['result'] == 'success') {
            let my_diswatch_movie = response['my_diswatch_movie'];
            alert("받아오기 성공!")
            console.log(my_diswatch_movie);
            for (let i = 0; i < my_diswatch_movie.length; i++) {
              my_page_diswatch_movie(my_diswatch_movie[i]['poster'],my_diswatch_movie[i]['title'],my_diswatch_movie[i]['director'])
            }
          } else {
            alert('결과를 받아오지 못했습니다');
          }
        }
      })
}



  // 종류에 따른 분류
  function my_page_like_movie(poster, title, director) {
            let card_tamp = '<div class="card">\
            <img src="'+ poster +'" class="card-img-top" alt="...">\
            <div class="card-body">\
              <h5 class="card-title">' + title + '</h5>\
              <p class="card-text"><small class="text-muted">'+ director +'</small></p>\
            </div>';
          $('#like_card_board').append(card_tamp);
        }


  function my_page_dislike_movie(poster, title, director) {
            let card_tamp = '<div class="card">\
            <img src="'+ poster +'" class="card-img-top" alt="...">\
            <div class="card-body">\
              <h5 class="card-title">' + title + '</h5>\
              <p class="card-text"><small class="text-muted">'+ director +'</small></p>\
            </div>';
          $('#dislike_card_board').append(card_tamp);
        }


  function my_page_comment_movie(poster, title, director) {
            let card_tamp = '<div class="card">\
            <img src="'+ poster +'" class="card-img-top" alt="...">\
            <div class="card-body">\
              <h5 class="card-title">' + title + '</h5>\
              <p class="card-text"><small class="text-muted">'+ director +'</small></p>\
            </div>';
          $('#comment_card_board').append(card_tamp);
        }


  function my_page_diswatch_movie(poster, title, director) {
            let card_tamp = '<div class="card">\
            <img src="'+ poster +'" class="card-img-top" alt="...">\
            <div class="card-body">\
              <h5 class="card-title">' + title + '</h5>\
              <p class="card-text"><small class="text-muted">'+ director +'</small></p>\
            </div>';
          $('#diswatch_card_board').append(card_tamp);
        }



  //로그아웃 
  $(document).ready(function(){
        get_session()
    });

    function get_session(){
        html_logout = '<a class="nav-link" href="#" id="btn_logout" onclick="btn_logout()">로그아웃</a>'
        $('#').append(html_logout)
        email_head("{{sessionemail}}")
    }


    function btn_logout(){
      jbResult = confirm( "정말 로그아웃을 하시겠습니까?" );
      if(jbResult == true){
        $.ajax({
           type: "POST",
           url: "/test2",
           data: {},
           success: function(response){

     }
   })
    $('#btn_logout').remove();  
  }
    else{
    }
  }
</script>
<script type="text/javascript">
function btn_temp_page(){
  location.href="/temp"
}
function btn_my_page() {
  location.href="/mypage"
}
function go_page2(){
  location.href="/page2"
}


</script>


</head>
<body>
  <div class="wrap clearfix">

    <!-- 상단을 가리키는 top_side에는 로고, DB내 영화검색, 유저이메일  -->
    <div class="top_side">
      <nav class = "top_info">
        <!-- top_left_banner에는 로고만 -->
        <div class="top_left_banner">
          <a class = "home_logo">
            <img class="go_home_img" src="C:\Users\ASUS\Desktop\Sparta\ART_CINEMA_200411\static" onclick="btn_temp_page()">
          </a>
        </div>

        <!-- top_center_banner에는 검색 기능만 -->
        <div class="top_center_banner">
            <!-- <a active="1" class="search_text" href="/my_movie"></a> -->
              <div class="movie_search_container">
                <input type="text" id="word_input" placeholder="제목, 감독, 배우를 입력해주세요.">
            </div>
        </div>

        <!-- top_right_banner에는 유저 이메일(나중애 닉네임으로 변경 예정) -->
        <div class="top_right_banner">
            <a class = "mypage">
              <div class="user_email" onclick="btn_my_page()">god2dia@gmail.com</div>
            </a>
            <a class="nav-link" href="#" id="btn_logout" onclick="btn_logout()">로그아웃</a>

          </div>

        </div>
      </nav>        
    </div>



    <div class = "center_side">
      <div class = "section_movie">
      <div class= "card_title" id="genre_title">
        <h5>좋아요! 영화</h5>
      </div>
      <div class="card-group" id="like_card_board">
        <div class="card">
          <img class="card-img-top" src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1584000334/sqxotxchcbzcihfqcjjj.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">미안하다 사랑한다</h5>
            <p class="card-text"><small class="text-muted">감독 : OOO</small></p>
          </div>
        </div>
      </div>
    </div>



    <div class = "section_movie">
      <div class= "card_title" id="genre_title">
        <h5>싫어요! 영화</h5>
      </div>
      <div class="card-group" id="dislike_card_board">
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1586507136/flr2ffnqzlv1txliqztz.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">일루셔니스트</h5>
          </div>
        </div>
      </div>
    </div>



    <div class = "section_movie">
      <div class= "card_title" id="genre_title">
        <h5>댓글단! 영화</h5>
      </div>
      <div class="card-group" id="comment_card_board">
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1584000433/b13cxuzhhbxzeaelbl7u.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">착한남자</h5>
          </div>
        </div>
      </div>
    </div>



    <div class = "section_movie">
      <div class= "card_title" id="genre_title">
        <h5>평가를 기다리고 있어요</h5>
      </div>
      <div class="card-group" id="diswatch_card_board">
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1585302564/njhspw3tnmufqamcmmqf.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">올더머니</h5>
          </div>
        </div>
      </div>
    </div>



        <!-- <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1586507136/flr2ffnqzlv1txliqztz.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">일루셔니스트</h5>

          </div>
        </div>
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1584000433/b13cxuzhhbxzeaelbl7u.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">착한남자</h5>

          </div>
        </div>
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1585302564/njhspw3tnmufqamcmmqf.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">올더머니</h5>
          </div>
        </div> -->

        <!-- <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1584947673/k0syxfurhwhodeyoltdc.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">블랙 호크 다운</h5>
          </div>
        </div>
        <div class="card">
          <a class = "watch" onclick="btn_home()"></a>
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1581314484/uuwoepbb3ujikhsp3byq.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">괴물</h5>
            <p class="card-text"><small class="text-muted">감독 : OOO</small></p>
          </div>
        </div>
        <div class="card">
          <img src="https://dhgywazgeek0d.cloudfront.net/watcha/image/upload/c_fill,h_264,q_80,w_470/v1463392382/m85knc-6050.webp" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">맨 인 블랙3</h5>
          </div>
        </div> -->
      </div>

      </div>

      <footer>
        <p class="copy">Copyright ⓒ Developer 지훈, 희진, 하경. All Rights Reserved.</p>
        ::after
      </footer>
    </div>
  </body>
    <style type="text/css">
    body {
      width: 100%;
      background: rgb(20, 21, 23);
      color: #ffffff;
      overflow-x: hidden;
      word-break: break-all;
      -ms-word-break: break-all;
    }

    .clearfix:after{
      height: 100%;
      content: '';
      display: block;
      clear: both;
    }

    /*페이지 상단*/
    .top_side {
      background-color: #030708;
      z-index:500;
      font-size:14px;
      width:100%;
      height:72px;
      /*padding:0 4%;*/
    }
    .go_home_img{
      background-size: 173px 26px;
      position: relative;
      z-index: 10001;
      float: left;
      line-height: 72px;
      margin-left: 23px;
    }
   .home_logo img{
      margin: 10px 0 0 8px;
      position: relative;
      float: left;
      background-size: 173px 26px;
      width: 80px;
      height: 52px;
    }

    .movie_search_container {
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
      border: 0px solid;
    }
    .search_text {
      float: center;
      line-height: 72px;
      margin-left: 23px;
      color: #ffffff;
    }

    #word_input {
      display: flex;
      width: 800px;
      height: 30px;
      margin: auto;
    }
    .top_info {
      display: flex;
    }
    .top_left_banner {
      width: 150px;
      background-color: #030708;
      z-index:500;
      font-size:14px;
      height:72px;
      padding:0 4%;
    }

    .top_center_banner {
      width: 1300px;
      flex: right;
      background-color: #030708;
      z-index:500;
      font-size:14px;
      height:72px;
      /*padding:0 4%;*/
    }text-align: 

/***********가운데***********/
    .top_right_banner {
      width: 230px;
      flex: right;
      background-color: #030708;
      z-index:500;
      font-size:14px;
      height:72px;
      /*padding:0 4%;*/
      text-align: right;
    }text-align: 

    /*페이지 가운데*/
    .title {
      float: left;
      color: #030708;
      padding-left: 33px;
    }

    .title_text {
      float: left;
      line-height: 72px;
      margin-left: 23px;
      color: #ffffff;
    }

        .my_genre_title{
     height:50px;
     font-size:21pt;
     margin-left: 25px;
     padding-top: 10px;
     font-weight: bold;
     font-family: sans-serif;
   }

   .my_genre_contents{
     width: 1250px;
     float: left;
   }

   .genre_style{
     width:500px;
     height: 110px;
     float: left;
     text-align: center;
     font-size: 20pt;
     padding-top: 15px
   }

   .center_side{
    width: 1600px;
    height: 130px;
    margin-top: 50px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    border: 0px solid;
    border-radius: 20px;
  }

  .section_movie {
    -webkit-box-flex: 1;
    -ms-flex: 1 0 0%;
    flex: none;
    margin-bottom: 0;
  }

  #genre_title {
    float: center;
    color: #ffffff;
    /*padding-left: 33px;*/
  }

  .card-group {
    margin-bottom: 30px;
    height: 240px;
  }

  .card {
    width: 300px;
    height: 240px;
    border: none;
  }

  .card-group .card {
    -webkit-box-flex: 1;
    -ms-flex: 1 0 0%;
    flex: none;
    margin-bottom: 0;
  }

  .card img {
    height: 80%;
  }

  .card-body {
    padding: 0rem;
    background-color: black; 
  }

  .card-text {
    color: white;
  }




    /*페이지 하단*/
  footer{
    position: fixed; bottom: 0;
    width: 100%;
    padding: 8px 0;
    background: #231f20;
  }

  footer .copy{
    text-align: center;;
    color: #ffffff; font-size: 13px;;
  }

    

.card-img-top {
    -webkit-transform:scale(1);
    -moz-transform:scale(1);
    -ms-transform:scale(1); 
    -o-transform:scale(1);  
    transform:scale(1);
    -webkit-transition:.3s;
    -moz-transition:.3s;
    -ms-transition:.3s;
    -o-transition:.3s;
    transition:.3s;
}
.card-img-top:hover {
    -webkit-transform:scale(1.2);
    -moz-transform:scale(1.2);
    -ms-transform:scale(1.2);   
    -o-transform:scale(1.2);
    transform:scale(1.2);
}


</style>

  </html>